å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å°èœï¼Œä¸€ä¸ªæ¸´æœ›åœ¨äº’è”ç½‘è¡Œä¸šåšåˆ°è”¡ä¸èœçš„å°èœã€‚å¯æŸ”å¯åˆšï¼Œç‚¹èµåˆ™æŸ”ï¼Œç™½å«–åˆ™åˆšï¼
**æ­»é¬¼~çœ‹å®Œè®°å¾—ç»™æˆ‘æ¥ä¸ªä¸‰è¿å“¦ï¼**


![](https://user-gold-cdn.xitu.io/2020/4/11/17169c46045528af?w=240&h=224&f=jpeg&s=7529)


>æœ¬æ–‡ä¸»è¦ä»‹ç» `MybatisPlusçš„ä½¿ç”¨`
>
>å¦‚æœ‰éœ€è¦ï¼Œå¯ä»¥å‚è€ƒ
>
>å¦‚æœ‰å¸®åŠ©ï¼Œä¸å¿˜ **ç‚¹èµ** â¥
>
>å¾®ä¿¡å…¬ä¼—å·å·²å¼€å¯ï¼Œ**å°èœè‰¯è®°**ï¼Œæ²¡å…³æ³¨çš„åŒå­¦ä»¬è®°å¾—å…³æ³¨å“¦ï¼

å¦‚æœä½ æ¯å¤©è¿˜åœ¨é‡å¤å†™ **CRUD** çš„ **SQL**ï¼Œå¦‚æœä½ å¯¹è¿™äº› **SQL** å·²ç»ä¸è€çƒ¦äº†ï¼Œé‚£ä¹ˆä½ ä½•ä¸èŠ±è´¹ä¸€äº›æ—¶é—´æ¥é˜…è¯»è¿™ç¯‡æ–‡ç« ï¼Œç„¶åå¯¹å·²æœ‰çš„è€é¡¹ç›®è¿›è¡Œæ”¹é€ ï¼Œå¿…æœ‰æ”¶è·ï¼

## ä¸€ã€MP æ˜¯ä»€ä¹ˆ

**MP** å…¨ç§° **Mybatis-Plus** ï¼Œå¥—ç”¨å®˜æ–¹çš„è§£é‡Šä¾¿æ˜¯æˆä¸º MyBatis æœ€å¥½çš„æ­æ¡£,ç®€ç§°**åŸºå‹**ã€‚å®ƒæ˜¯åœ¨ **MyBatis** çš„åŸºç¡€ä¸Šåªåšå¢å¼ºä¸åšæ”¹å˜ï¼Œä¸ºç®€åŒ–å¼€å‘ã€æé«˜æ•ˆç‡è€Œç”Ÿã€‚

### 1. ä¸‰å¤§ç‰¹æ€§

#### 1ï¼‰æ¶¦ç‰©æ— å£°

åªåšå¢å¼ºä¸åšæ”¹å˜ï¼Œå¼•å…¥å®ƒä¸ä¼šå¯¹ç°æœ‰å·¥ç¨‹äº§ç”Ÿå½±å“ï¼Œå¦‚ä¸èˆ¬é¡ºæ»‘ã€‚

#### 2ï¼‰æ•ˆç‡è‡³ä¸Š

åªéœ€ç®€å•é…ç½®ï¼Œå³å¯å¿«é€Ÿè¿›è¡Œå•è¡¨ CRUD æ“ä½œï¼Œä»è€ŒèŠ‚çœå¤§é‡æ—¶é—´ã€‚

#### 3ï¼‰ä¸°å¯ŒåŠŸèƒ½

ä»£ç ç”Ÿæˆã€ç‰©ç†åˆ†é¡µã€æ€§èƒ½åˆ†æç­‰åŠŸèƒ½ä¸€åº”ä¿±å…¨ã€‚

### 2. æ”¯æŒæ•°æ®åº“

- **mysql** ã€**mariadb** ã€**oracle** ã€**db2** ã€**h2** ã€**hsql** ã€**sqlite** ã€**postgresql** ã€**sqlserver** ã€**presto** ã€**Gauss** ã€**Firebird**
- **Phoenix** ã€**clickhouse** ã€**Sybase ASE** ã€ **OceanBase** ã€è¾¾æ¢¦æ•°æ®åº“ ã€è™šè°·æ•°æ®åº“ ã€äººå¤§é‡‘ä»“æ•°æ®åº“ ã€å—å¤§é€šç”¨æ•°æ®åº“ 

### 3. æ¡†æ¶ç»“æ„

![](https://baomidou.com/img/mybatis-plus-framework.jpg)

å®è¯è¯´ï¼Œä»¥ä¸Šè¿™äº›å†…å®¹åªè¦ä½ æ‰“å¼€å®˜ç½‘ä¹Ÿèƒ½çœ‹åˆ°ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ¥ä¸‹æ¥å°±å…ˆæ¥å®é™…æ“ä½œä¸€ç•ªï¼

![](https://cbuc.top/1606309189807.gif)

## äºŒã€MPå®æˆ˜

### 1. æ‰‹æ‘¸æ‰‹å¼é¡¹ç›®ç»ƒä¹ 

#### 1ï¼‰æ•°æ®åº“åŠè¡¨å‡†å¤‡

**sql è¯­å¥ï¼š**

```sql
use test;
CREATE TABLE `student`  (
  `id` int(0) NOT NULL AUTO_INCREMENT,
  `dept_id` int(0) NULL DEFAULT NULL,
  `name` varchar(16) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NULL DEFAULT NULL,
  `remark` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 7 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_bin ROW_FORMAT = Dynamic;
-- ----------------------------
-- Records of student
-- ----------------------------
INSERT INTO `student` VALUES (1, 1, 'å°èœ', 'å…³æ³¨å°èœä¸è¿·è·¯ï¼');
INSERT INTO `student` VALUES (2, 2, 'å°æ˜', 'å¥½å¥½å­¦ä¹ ï¼Œå¤©å¤©å‘ä¸Šï¼');
```

#### 2ï¼‰pom ä¾èµ–

```xml
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-test</artifactId>
</dependency>
<!--lombok-->
<dependency>
    <groupId>org.projectlombok</groupId>
    <artifactId>lombok</artifactId>
    <version>1.16.16</version>
</dependency>
<!--MPæ’ä»¶-->
<dependency>
    <groupId>com.baomidou</groupId>
    <artifactId>mybatis-plus-boot-starter</artifactId>
    <version>3.2.0</version>
</dependency>
<!--Mysql-->
<dependency>
    <groupId>mysql</groupId>
    <artifactId>mysql-connector-java</artifactId>
    <version>8.0.21</version>
</dependency>
<!-- è¿æ¥æ±  -->
<dependency>
    <groupId>com.alibaba</groupId>
    <artifactId>druid</artifactId>
    <version>1.2.1</version>
</dependency>
<!--JUNIT-->
<dependency>
    <groupId>junit</groupId>
    <artifactId>junit</artifactId>
    <version>4.13.1</version>
</dependency>
```

#### 3ï¼‰é…ç½®æ–‡ä»¶

```yaml
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/test
    username: root
    password: 123456
    driver-class-name: com.mysql.cj.jdbc.Driver
```

#### 4ï¼‰å®ä½“ç±»

```java
@Data
@Builder
@TableName("student")
public class User {

    @TableId(type = IdType.AUTO)
    private Integer id;

    private Integer deptId;

    private String name;

    private String remark;
}
```

#### 5ï¼‰Mapper

```java
public interface UserMapper extends BaseMapper<User> {}
```

#### 6ï¼‰æµ‹è¯•ç±»

```java
@RunWith(SpringRunner.class)
@SpringBootTest
public class MapperTest {

    @Autowired
    private UserMapper userMapper;

    @Test
    public void getAll() {
        List<User> users = userMapper.selectList(null);
        users.forEach(System.out::println);
    }
}
/** OUTPUT:
User(id=1, deptId=1, name=å°èœ, remark=å…³æ³¨å°èœä¸è¿·è·¯ï¼)
User(id=2, deptId=1, name=å°æ˜, remark=å¥½å¥½å­¦ä¹ ï¼Œå¤©å¤©å‘ä¸Šï¼)
**/
```

**å°èœç»“ï¼š**

åœ¨ä»¥ä¸Šçš„ç»“æœï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å·²ç»æ‰“å°å‡ºäº†æ•°æ®åº“ä¸­çš„å…¨éƒ¨æ•°æ®ï¼ˆä¸¤æ¡ï¼‰ã€‚è€Œå¹¶æ²¡æœ‰çœ‹åˆ°å¹³æ—¶æˆ‘ä»¬éœ€è¦å†™çš„ **mapper.xml** æ–‡ä»¶ï¼Œåªæ˜¯ç”¨åˆ°äº† **usermapper** ä¸­çš„ **selectList()** æ–¹æ³•ï¼Œè€Œ **UserMapper** ç»§æ‰¿äº† **BaseMapper** è¿™ä¸ªæ¥å£ï¼Œè¿™ä¸ªæ¥å£ä¾¿æ˜¯ **MybatisPlus** æä¾›ç»™æˆ‘ä»¬çš„ï¼Œæˆ‘ä»¬å†æ¥çœ‹ä¸‹è¿™ä¸ªæ¥å£ç»™æˆ‘ä»¬æä¾›äº†å“ªäº›æ–¹æ³•ã€‚

### 2.  CRUD åŸºæ“

#### 1ï¼‰insert

```java
@Test
public void insert() {
    //è¿™é‡Œä½¿ç”¨äº† lombok ä¸­çš„å»ºé€ è€…æ¨¡å¼æ„å»ºå¯¹è±¡
    User user = User.builder().deptId(1).name("å°å").remark("å°åçˆ±å­¦ä¹ ").build();
    int insertFlag = userMapper.insert(user);
    log.info("æ’å…¥å½±å“è¡Œæ•°,{} | å°åçš„ID: {}", insertFlag, user.getId());
}
/** OUTPUT:
æ’å…¥å½±å“è¡Œæ•°,1 | å°åçš„ID: 8
**/
```

å¯ä»¥çœ‹åˆ°æˆ‘ä»¬ä¸ä»…æ’å…¥äº†æ•°æ®ï¼Œè€Œä¸”è¿˜è·å–åˆ°äº†æ’å…¥æ•°æ®çš„**ID**ï¼Œä½†æ˜¯å€¼å¾—æ³¨æ„çš„æ˜¯è¿™é‡Œçš„ **ID** è™½ç„¶æ˜¯è‡ªå¢çš„ï¼Œä½†å¹¶éæ˜¯ **MP** é»˜è®¤çš„ **IDç”Ÿæˆç­–ç•¥**ï¼Œè€Œæ˜¯æˆ‘ä»¬åœ¨å®ä½“ç±»ä¸­æŒ‡å®šçš„ï¼š

![](https://cbuc.top/1606319990902.png)

åœ¨ **MP** ä¸­æ”¯æŒçš„ä¸»é”®ç”Ÿæˆç­–ç•¥æœ‰ä»¥ä¸‹å‡ ç§ï¼š

 ![](https://cbuc.top/1606367042100.png)

æˆ‘ä»¬æ—¢ç„¶å·²ç»çœ‹åˆ°äº† **@TableId** è¿™ä¸ªæ³¨è§£ï¼Œé‚£æˆ‘ä»¬å†æ¥å…³æ³¨ä¸€ä¸ªå¸¸ç”¨æ³¨è§£ **@TableField**

ä»æ³¨è§£åä¸Šæˆ‘ä»¬å°±å¯ä»¥çœ‹å‡ºï¼Œ**@TableId** æ˜¯ç”¨æ¥æ ‡è®°ä¸»é”® **ID** çš„ï¼Œè€Œ **@TableField** æ˜¯ç”¨æ¥æ ‡è®°å…¶ä»–å­—æ®µçš„ã€‚

![](https://cbuc.top/1606367418043.png)

å¯ä»¥çœ‹å¾—å‡ºæ¥è¿™ä¸ªæ³¨è§£ä¸­å­˜åœ¨çš„å€¼è¿˜æ˜¯æ¯”è¾ƒå¤šçš„ï¼Œä¸‹é¢ä»‹ç»å‡ ä¸ªå¸¸ç”¨çš„å€¼ï¼š

- **value**

ç”¨äºè§£å†³å­—æ®µåä¸ä¸€è‡´é—®é¢˜å’Œé©¼å³°å‘½åï¼Œæ¯”å¦‚å®ä½“ç±»ä¸­å±æ€§åä¸º **remark**ï¼Œä½†æ˜¯è¡¨ä¸­çš„å­—æ®µåä¸º **describe** ï¼Œè¿™ä¸ªæ—¶å€™å°±å¯ä»¥ä½¿ç”¨ `@TableField(value="describe")` æ¥è¿›è¡Œè½¬æ¢ã€‚é©¼å³°è½¬æ¢å¦‚æœåœ¨å…¨å±€ä¸­æœ‰é…ç½®é©¼å³°å‘½åï¼Œè¿™ä¸ªåœ°æ–¹å¯ä¸å†™ã€‚

- **exist**

ç”¨äºåœ¨æ•°æ®è¡¨ä¸­ä¸å­˜åœ¨çš„å­—æ®µï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `@TableField(exist = false)` æ¥è¿›è¡Œæ ‡è®°

- **condition**

ç”¨åœ¨é¢„å¤„ç† **WHERE** å®ä½“æ¡ä»¶è‡ªå®šä¹‰è¿ç®—è§„åˆ™ï¼Œæ¯”å¦‚æˆ‘é…ç½®äº† `@TableField(condition = SqlCondition.LIKE)`ï¼Œè¾“å‡º **SQL** ä¸ºï¼š`select è¡¨ where name LIKE CONCAT('%',å€¼,'%')`ï¼Œå…¶ä¸­ **SqlCondition** å€¼å¦‚ä¸‹ï¼š

![](https://cbuc.top/1606368511478.png)

- **update**

ç”¨åœ¨é¢„å¤„ç† **set** å­—æ®µè‡ªå®šä¹‰æ³¨å…¥ï¼Œæ¯”å¦‚æˆ‘é…ç½®äº† `@TableField(update = "%s+1")`ï¼Œå…¶ä¸­ **%s** ä¼šå¡«å……å­—æ®µï¼Œè¾“å‡º **SQL** ä¸ºï¼š`update è¡¨å set å­—æ®µ = å­—æ®µ+1 where æ¡ä»¶`

- **select**

ç”¨äºæ˜¯å¦æŸ¥è¯¢æ—¶çº¦æŸï¼Œå¦‚æœæˆ‘ä»¬æœ‰ä¸ªå­—æ®µ **remark** æ˜¯ **text** ç±»å‹çš„ï¼ŒæŸ¥è¯¢çš„æ—¶å€™ä¸æƒ³æŸ¥è¯¢è¯¥å­—æ®µï¼Œé‚£ä¹ˆå°±å¯ä»¥ä½¿ç”¨ `@TableField(select = false)` æ¥çº¦æŸæŸ¥è¯¢çš„æ—¶å€™ä¸æŸ¥è¯¢è¯¥å­—æ®µ

#### 2ï¼‰update

**MybatisPlus** çš„æ›´æ–°æ“ä½œå­˜åœ¨ä¸¤ç§ï¼š

```java
int updateById(Param("et") T entity);

int update(@Param("et") T entity, @Param("ew") Wrapper<T> updateWrapper);
```

##### æ ¹æ® ID æ›´æ–°

```java
@Test
public void update() {
    User user = User.builder().id(3).name("å°å").remark("å°åçˆ±ç©æ¸¸æˆ").build();
    userMapper.updateById(user);
}
/** æ›´æ–°ç»“æœ:
User(id=3, deptId=1, name=å°å, remark=å°åçˆ±ç©æ¸¸æˆ)
**/
```

##### æ ¹æ®æ¡ä»¶æ›´æ–°

```java
@Test
public void update() {
    UpdateWrapper<User> updateWrapper = new UpdateWrapper<>();
    updateWrapper.eq("name","å°å").set("remark","å°åçˆ±ä¸‹æ£‹");
    userMapper.update(null, updateWrapper);
}
/** æ›´æ–°ç»“æœ:
User(id=3, deptId=1, name=å°å, remark=å°åçˆ±ä¸‹æ£‹)
**/
```

æˆ‘ä»¬ä¹Ÿå¯ä»¥å°†è¦æ›´æ–°çš„æ¡ä»¶æ”¾è¿› **user å¯¹è±¡** é‡Œé¢ï¼š

```java
@Test
public void update() {
    UpdateWrapper<User> updateWrapper = new UpdateWrapper<>();
    updateWrapper.eq("name","å°å");
    User user = User.builder().remark("å°åçˆ±æ¸¸æ³³").build();
    userMapper.update(user, updateWrapper);
}
/** æ›´æ–°ç»“æœ:
User(id=3, deptId=1, name=å°å, remark=å°åçˆ±æ¸¸æ³³)
**/
```

#### 3ï¼‰delete

åœ¨ **MybatisPlus** ä¸­åˆ é™¤çš„æ–¹å¼ç›¸å¯¹äºæ›´æ–°å¤šï¼Œæ€»å…±æœ‰å››ç§ï¼š

```java
int deleteById(Serializable id);

int deleteByMap(@Param("cm") Map<String, Object> columnMap);

int delete(@Param("ew") Wrapper<T> wrapper);

int deleteBatchIds(@Param("coll") Collection<? extends Serializable> idList);
```

##### æ ¹æ® ID åˆ é™¤

```java
@Test
public void deleteById() {
    userMapper.deleteById(3);
}
/** SQLè¯­å¥ï¼š
DELETE FROM student WHERE id = 3;
**/
```

##### æ ¹æ® Map åˆ é™¤

```java
@Test
public void deleteByMap() {
    HashMap<String, Object> columnMap = new HashMap<>();
    columnMap.put("name","å°å");
    columnMap.put("remark","å°åçˆ±æ¸¸æ³³");
    userMapper.deleteByMap(columnMap);
}
/** SQLè¯­å¥ï¼š
DELETE FROM student WHRE name = 'å°å' AND remark = 'å°åçˆ±æ¸¸æ³³';
**/
```

##### æ ¹æ® Wrapper åˆ é™¤

```java
@Test
public void delete() {
    UpdateWrapper<User> wrapper = new UpdateWrapper<>();
    wrapper.eq("remark","å°åçˆ±ä¸‹æ£‹");
    userMapper.delete(wrapper);
}
/** SQLè¯­å¥ï¼š
DELETE FROM student WHRE remark = 'å°åçˆ±ä¸‹æ£‹';
**/
```

æ ¹æ® **Wrapper** åˆ é™¤è¿˜æœ‰å¦å¤–ä¸€ç§æ–¹å¼ï¼Œç›´æ¥å°†å®ä½“ç±»æ”¾å…¥ **Wrapper** ä¸­åŒ…è£…ï¼š

```java
@Test
public void delete() {
    User user = User.builder().remark("å°åçˆ±ä¸‹æ£‹").build();
    UpdateWrapper<User> wrapper = new UpdateWrapper<>(user);
    userMapper.delete(wrapper);
}
/** SQLè¯­å¥ï¼š
DELETE FROM student WHRE remark = 'å°åçˆ±ä¸‹æ£‹';
**/
```

##### æ ¹æ® ID æ‰¹é‡åˆ é™¤

```java
@Test
public void deleteBatchIds() {
    List<Integer> idList = new ArrayList<>();
    idList.add(4);
    idList.add(7);
    userMapper.deleteBatchIds(idList);
}
/** SQLè¯­å¥ï¼š
DELETE FROM student WHERE id In (4,7)
**/
```

#### 4ï¼‰select

æŸ¥è¯¢æ“ä½œåœ¨æˆ‘ä»¬å¼€å‘ä¸­æ˜¯æœ€ç»å¸¸ç”¨åˆ°çš„ï¼Œä¹Ÿæ˜¯é‡ä¸­ä¹‹é‡ã€‚**MybatisPlus** ä¸­æ”¯æŒæŸ¥è¯¢çš„æ–¹æ³•ä¹Ÿæ¯”è¾ƒå¤šï¼Œå¦‚ä¸‹ï¼š

```java
T selectById(Serializable id);

List<T> selectBatchIds(@Param("coll") Collection<? extends Serializable> idList);

List<T> selectByMap(@Param("cm") Map<String, Object> columnMap);

T selectOne(@Param("ew") Wrapper<T> queryWrapper);

Integer selectCount(@Param("ew") Wrapper<T> queryWrapper);

List<T> selectList(@Param("ew") Wrapper<T> queryWrapper);

List<Map<String, Object>> selectMaps(@Param("ew") Wrapper<T> queryWrapper);

List<Object> selectObjs(@aram("ew") Wrapper<T> queryWrapper);

IPage<T> selectPage(IPage<T> page, @Param("ew") Wrapper<T> queryWrapper);

IPage<Map<String, Object>> selectMapsPage(IPage<T> page, @Param("ew") Wrapper<T> queryWrapper);
```

å¯ä»¥çœ‹åˆ°æ€»å…±æœ‰ **10** ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥ä¸€ä¸ªä¸€ä¸ªæµ‹è¯•

##### æŸ¥è¯¢æ‰€æœ‰

```java
@Test
public void selectList() {
    List<User> users = userMapper.selectList(null);
    users.forEach(System.out::println);
}
/** 
	OUTPUT:
User(id=1, deptId=1, name=å°èœ, remark=å…³æ³¨å°èœä¸è¿·è·¯ï¼)
User(id=2, deptId=1, name=å°æ˜, remark=å¥½å¥½å­¦ä¹ ï¼Œå¤©å¤©å‘ä¸Šï¼)
	SQLè¯­å¥:
SELECT id, dept_id, name, remark FROM student;
**/
```

##### æŸ¥è¯¢æ•°é‡

```java
@Test
public void selectCount() {
    QueryWrapper<User> queryWrapper = new QueryWrapper<>();
    queryWrapper.like("name","å°");
    System.out.println(userMapper.selectCount(queryWrapper));
}
/** 
	OUTPUT:
2
	SQLè¯­å¥:
SELECT COUNT( 1 ) FROM student WHERE (name LIKE '%å°%');
**/
```

##### æ ¹æ® ID æŸ¥è¯¢

```java
@Test
public void selectById() {
    User user = userMapper.selectById(1);
    System.out.println(user);
}
/** 
	OUTPUT:
User(id=1, deptId=1, name=å°èœ, remark=å…³æ³¨å°èœä¸è¿·è·¯ï¼)
	SQLè¯­å¥:
SELECT id, dept_id, name, remark FROM student WHERE ID = 1;
**/
```

##### æ ¹æ® ID æ‰¹é‡æŸ¥è¯¢

```java
@Test
public void selectBatchIds() {
    List<User> users = userMapper.selectBatchIds(Arrays.asList(1, 2));
    users.forEach(System.out::println);
}
/** 
	OUTPUT:
User(id=1, deptId=1, name=å°èœ, remark=å…³æ³¨å°èœä¸è¿·è·¯ï¼)
User(id=2, deptId=1, name=å°æ˜, remark=å¥½å¥½å­¦ä¹ ï¼Œå¤©å¤©å‘ä¸Šï¼)
	SQLè¯­å¥:
SELECT id, dept_id, name, remark FROM student WHERE ID IN (1, 2);
**/
```

##### æ ¹æ®æ¡ä»¶æŸ¥è¯¢å•æ¡

```java
@Test
public void selectOne() {
    QueryWrapper<User> queryWrapper = new QueryWrapper<>();
    queryWrapper.eq("name","å°èœ");
    User user = userMapper.selectOne(queryWrapper);
    System.out.println(user);
}
/**
	OUTPUT:
User(id=1, deptId=1, name=å°èœ, remark=å…³æ³¨å°èœä¸è¿·è·¯ï¼)
	SQLè¯­å¥:
 SELECT id, name, dept_id, remark FROM student WHERE (name = 'å°èœ');
**/
```

##### æ ¹æ®æ¡ä»¶æŸ¥è¯¢å¤šæ¡

é€šè¿‡ **map** ä¼ é€’å‚æ•°ï¼Œä¸æ˜¯é€šè¿‡ **LIKE** æŸ¥è¯¢ï¼Œè€Œæ˜¯é€šè¿‡ **=** æŸ¥è¯¢

```java
@Test
public void selectByMap() {
    HashMap<String, Object> columnMap = new HashMap<>();
    columnMap.put("name","å°");
    List<User> users = userMapper.selectByMap(columnMap);
    users.forEach(System.out::println);
}
/**
	OUTPUT:
null
	SQLè¯­å¥:
SELECT id, name, dept_id, remark FROM student WHERE name = 'å°';
**/
```

å¦‚æœæˆ‘ä»¬æ²¡æœ‰æ–°å»ºå®ä½“ç±»è¿›è¡Œç»“æœå°è£…ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ç”¨ **Map** æ¥æ¥æ”¶ç»“æœé›†ï¼š

```java
@Test
public void selectMaps() {
    QueryWrapper<User> queryWrapper = new QueryWrapper<>();
    queryWrapper.like("name","å°");
    List<Map<String, Object>> maps = userMapper.selectMaps(queryWrapper);
    maps.forEach(System.out::println);
}
/**
	OUTPUT:
{name=å°èœ, remark=å…³æ³¨å°èœä¸è¿·è·¯ï¼, id=1, dept_id=1}
{name=å°æ˜, remark=å¥½å¥½å­¦ä¹ ï¼Œå¤©å¤©å‘ä¸Šï¼, id=2, dept_id=1}
	SQLè¯­å¥ï¼š
SELECT id, name, dept_id, remark FROM student WHERE (name LIKE '%å°%');
**/
```

ä¹Ÿå¯ä»¥ç”¨ **Object** å¯¹è±¡æ¥æ¥æ”¶ç»“æœé›†ï¼š

```java
@Test
public void selectObjs() {
    QueryWrapper<User> queryWrapper = new QueryWrapper<>();
    queryWrapper.like("name", "å°");
    List<Object> objects = userMapper.selectObjs(queryWrapper);
}
/**
	OUTPUT:
{name=å°èœ, remark=å…³æ³¨å°èœä¸è¿·è·¯ï¼, id=1, dept_id=1}
{name=å°æ˜, remark=å¥½å¥½å­¦ä¹ ï¼Œå¤©å¤©å‘ä¸Šï¼, id=2, dept_id=1}
	SQLè¯­å¥ï¼š
SELECT id, name, dept_id, remark FROM student WHERE (name LIKE '%å°%');
**/
```

##### åˆ†é¡µæŸ¥è¯¢

```java
@Test
public void selectPage() {
    QueryWrapper<User> queryWrapper = new QueryWrapper<>();
    queryWrapper.like("name", "å°");
    Page<User> page = new Page<>(1, 1);
    IPage<User> userIPage = userMapper.selectPage(page, queryWrapper);
    System.out.println("æ•°æ®æ€»æ•°:" + userIPage.getTotal());
    System.out.println("æ€»é¡µæ•°:" + userIPage.getPages());
    System.out.println("å½“å‰é¡µ:" + userIPage.getCurrent());
    System.out.println("é¡µå¤§å°:" + userIPage.getSize());
    userIPage.getRecords().forEach(System.out::println);
}
/**
	OUTPUT:
æ•°æ®æ€»æ•°:2
æ€»é¡µæ•°:2
å½“å‰é¡µ:1
é¡µå¤§å°:1
User(id=1, deptId=1, name=å°èœ, remark=å…³æ³¨å°èœä¸è¿·è·¯ï¼)
	SQLè¯­å¥ï¼š
 SELECT id, name, dept_id, remark
 FROM student
 WHERE (name LIKE '%å°%')
 LIMIT 0,1;
**/
```

### 3. æ¡ä»¶æ„é€ å™¨

![](https://cbuc.top/1606485409985.png)

åœ¨ **CRUD** çš„åŸºæœ¬æ“ä½œä¸­ï¼Œæˆ‘ä»¬æƒ³è¦é€šè¿‡æ¡ä»¶æŸ¥è¯¢éƒ½æ˜¯é€šè¿‡ **Wrapper** ç±»è¿›è¡Œå°è£…çš„ï¼Œä¸Šé¢åªæ˜¯ç®€å•çš„ç”¨åˆ° **eq** å’Œ **like** æ“ä½œã€‚äº‹å®ä¸Šè¿™ä¸ªç±»ååˆ†å¼ºå¤§ï¼Œæˆ‘ä»¬åœ¨ä¸‹é¢ä¼šè¯¦ç»†è¿›è¡Œä»‹ç»ã€‚

#### 1ï¼‰allEq

å…¨éƒ¨ **eq** æˆ–ä¸ªåˆ« **isNull**

```java
allEq(Map<R, V> params)
allEq(Map<R, V> params, boolean null2IsNull)
allEq(boolean condition, Map<R, V> params, boolean null2IsNull)
    
allEq(BiPredicate<R, V> filter, Map<R, V> params)
allEq(BiPredicate<R, V> filter, Map<R, V> params, boolean null2IsNull)
allEq(boolean condition, BiPredicate<R, V> filter, Map<R, V> params, boolean null2IsNull) 
```

**å‚æ•°è¯´æ˜ï¼š**

> **paramï¼š** key ä¸ºæ•°æ®åº“å­—æ®µåï¼Œvalue ä¸ºå­—æ®µå€¼
>
> **nullsIsNullï¼š**ä¸º true åˆ™åœ¨ map çš„ value ä¸º null æ—¶è°ƒç”¨ **isNull** æ–¹æ³•ï¼Œä¸º false æ˜¯åˆ™å¿½ç•¥ value ä¸º null æ—¶ä¸è°ƒç”¨ **isNull** æ–¹æ³•
>
> **filterï¼š** è¿‡æ»¤å‡½æ•°ï¼Œåˆ¤æ–­æ˜¯å¦å…è®¸å­—æ®µä¼ å…¥æ¯”å¯¹æ¡ä»¶ä¸­

**ä½¿ç”¨ç¤ºä¾‹ï¼š**

- `allEq(Map<R, V> params)`

```java
@Test
public void testAllEq() {
    QueryWrapper<User> queryWrapper = new QueryWrapper<>();
    Map<String,Object> params = new HashMap<>();
    params.put("name","å°èœ");
    params.put("dept_id",1);
    params.put("remark",null);
    queryWrapper.allEq(params); //ä¼šè°ƒç”¨ isNull æ–¹æ³•
    userMapper.selectList(queryWrapper);
}
/** 
	ç»“æœ:
ï½›ï½
	SQLè¯­å¥:
 SELECT id,name,dept_id,remark
 FROM student
 WHERE (name = 'å°èœ' AND dept_id = 1 AND remark IS NULL);
 **/
```

- `allEq(Map<R, V> params, boolean null2IsNull)`

```java
@Test
public void testAllEq() {
    QueryWrapper<User> queryWrapper = new QueryWrapper<>();
    Map<String,Object> params = new HashMap<>();
    params.put("name","å°èœ");
    params.put("dept_id",1);
    params.put("remark",null);
    queryWrapper.allEq(params, false); //ä¸ä¼šè°ƒç”¨ isNull æ–¹æ³•
    userMapper.selectList(queryWrapper);
}
/** 
	ç»“æœ:
User(id=1, deptId=1, name=å°èœ, remark=å…³æ³¨å°èœä¸è¿·è·¯ï¼)
	SQLè¯­å¥:
 SELECT id,name,dept_id,remark
 FROM student
 WHERE (name = 'å°èœ' AND dept_id = 1);
 **/
```

- `allEq(boolean condition, Map<R, V> params, boolean null2IsNull)`

```java
@Test
public void testAllEq() {
    QueryWrapper<User> queryWrapper = new QueryWrapper<>();
    Map<String,Object> params = new HashMap<>();
    params.put("name","å°èœ");
    params.put("dept_id",1);
    params.put("remark",null);
    queryWrapper.allEq(false,params,false);	//ä¸ä¼šå¸¦å…¥æ¡ä»¶è¿›è¡ŒæŸ¥è¯¢
    userMapper.selectList(queryWrapper);
}
/** 
	ç»“æœ:
{name=å°èœ, remark=å…³æ³¨å°èœä¸è¿·è·¯ï¼, id=1, dept_id=1}
{name=å°æ˜, remark=å¥½å¥½å­¦ä¹ ï¼Œå¤©å¤©å‘ä¸Šï¼, id=2, dept_id=1}
	SQLè¯­å¥:
 SELECT id,name,dept_id,remark
 FROM student;
 **/
```

- `allEq(BiPredicate<R, V> filter, Map<R, V> params)`

```java
@Test
public void testAllEq() {
    QueryWrapper<User> queryWrapper = new QueryWrapper<>();
    Map<String, Object> params = new HashMap<>();
    params.put("name", "å°èœ");
    params.put("dept_id", 1);
    params.put("remark", null);
    //åªæœ‰ key ä¸­å«æœ‰ â€œmâ€ æ‰ä¼šç”¨ä½œæ¡ä»¶åˆ¤æ–­
    queryWrapper.allEq((k, v) -> (k.contains("m")), params);
    userMapper.selectList(queryWrapper);
}
/** 
	ç»“æœ:
0
	SQLè¯­å¥:
 SELECT id,name,dept_id,remark
 FROM student
 WHERE (name = 'å°èœ' AND remark IS NULL);
 **/
```

#### 2ï¼‰æ¯”è¾ƒæ“ä½œ

- **eqï¼š** ç›¸å½“äº `=`
- **neï¼š** ç›¸å½“äº `!=`
- **gtï¼š**  ç›¸å½“äº `>`
- **geï¼š** ç›¸å½“äº`>=`
- **ltï¼š**   ç›¸å½“äº `<`
- **leï¼š**   ç›¸å½“äº`<=`
- **betweenï¼š**   ç›¸å½“äº` between ... and ...`
- **notBetweenï¼š**   ç›¸å½“äº`not between ... and ...`
- **inï¼š**   ç›¸å½“äº`in(.., .., ..)`
- **notInï¼š**   ç›¸å½“äº`not in(.., .., ..)`

#### 3ï¼‰æ¨¡ç³ŠæŸ¥è¯¢

- **likeï¼š** `like("name","å°èœ") --> name like "%å°èœ%"`
- **notLikeï¼š** `notLike("name","å°èœ") --> name not like "%å°èœ%"`
- **likeLeftï¼š**  `like("name","å°èœ") --> name like "%å°èœ"`
- **likeRightï¼š** `like("name","å°èœ") --> name like "å°èœ%"`

#### 4ï¼‰æ’åº

- **orderByï¼š** 

```java
orderBy(boolean condition, boolean isAsc, R... columns)
```

`orderBy(true, true, "id", "name") --> order by id ASC, name ASC`

- **orderByAscï¼š**

`orderByAsc("id","name") --> order by id ASC, name ASC`

- **orderByDescï¼š**

`orderByDesc("id","name) --> order by id Desc, name Desc`

#### 5ï¼‰é€»è¾‘æŸ¥è¯¢

- **orï¼š**

æ‹¼æ¥ï¼šä¸»åŠ¨è°ƒç”¨ **or** è¡¨ç¤ºç´§æ¥ç€ä¸‹ä¸€ä¸ªæ–¹æ³•ä¸æ˜¯ç”¨ **and** è¿æ¥!(ä¸è°ƒç”¨ **or** åˆ™é»˜è®¤ä¸ºä½¿ç”¨ **and** è¿æ¥)ï¼Œ `eq("id",1).or().eq("name","è€ç‹")`

åµŒå¥—ï¼š`or(i -> i.eq("name", "æç™½").ne("status", "æ´»ç€"))`

- **andï¼š**

åµŒå¥—ï¼š` and(i -> i.eq("name", "æç™½").ne("status", "æ´»ç€")) `

#### 6ï¼‰select

åœ¨MPæŸ¥è¯¢ä¸­ï¼Œé»˜è®¤æŸ¥è¯¢æ‰€æœ‰çš„å­—æ®µï¼Œå¦‚æœæœ‰éœ€è¦ä¹Ÿå¯ä»¥é€šè¿‡selectæ–¹æ³•è¿›è¡ŒæŒ‡å®šå­—æ®µï¼Œå¦‚`select("id", "name")`

### 4. é…ç½®è®²è§£

#### 1ï¼‰åŸºæœ¬é…ç½®

- **configLocation**

ç”¨äºæŒ‡æ˜ **MyBatis ** é…ç½®æ–‡ä»¶çš„ä½ç½®ï¼Œå¦‚æœæˆ‘ä»¬æœ‰ **MyBatis** çš„é…ç½®æ–‡ä»¶ï¼Œéœ€å°†é…ç½®æ–‡ä»¶çš„è·¯å¾„é…ç½®åˆ° **configLocation** ä¸­

**SpringBootï¼š**

```properties
mybatis-plus.config-location = classpath:mybatis-config.xml
```

**SpringMvcï¼š**

```xml
<bean id="sqlSessionFactory"
class="com.baomidou.mybatisplus.extension.spring.MybatisSqlSessionFactoryBean">
<property name="configLocation" value="classpath:mybatis-config.xml"/>
</bean
```

- **mapperLocations**

ç”¨äºæŒ‡æ˜ **Mapper** æ‰€å¯¹åº”çš„ **XML** çš„æ–‡ä»¶ä½ç½®ï¼Œæˆ‘ä»¬åœ¨ **é€šç”¨ CRUD** ä¸­ç”¨åˆ°çš„ **Mapper** æ˜¯ç›´æ¥ç»§æ‰¿ **MP** æä¾›çš„ **BaseMapper** ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå®šä¹‰æ–¹æ³•ï¼Œç„¶ååœ¨ **XML** æ–‡ä»¶ä¸­è‡ªå®šä¹‰ **SQL**ï¼Œè€Œè¿™æ—¶æˆ‘ä»¬éœ€è¦å‘Šè¯‰ **Mapper** æ‰€å¯¹åº” **XML** æ–‡ä»¶çš„ä½ç½®

**SpringBootï¼š**

```properties
mybatis-plus.mapper-locations = classpath*:mybatis/*.xml
```

**SpringMVCï¼š**

```xml
<bean id="sqlSessionFactory"
class="com.baomidou.mybatisplus.extension.spring.MybatisSqlSessionFactoryBean">
<property name="mapperLocations" value="classpath*:mybatis/*.xml"/>
</bean>
```

- **typeAliasesPackage**

ç”¨äº **MyBatis**  åˆ«ååŒ…æ‰«æè·¯å¾„ï¼Œé€šè¿‡è¯¥å±æ€§å¯ä»¥ç»™åŒ…ä¸­çš„ç±»æ³¨å†Œåˆ«åï¼Œæ³¨å†Œååœ¨ **Mapper** å¯¹åº”çš„ **XML** æ–‡ä»¶ä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨ç±»åï¼Œè€Œä¸ç”¨ä½¿ç”¨å…¨é™å®šçš„ç±»å

**SpringBootï¼š**

```properties
mybatis-plus.type-aliases-package = cbuc.life.bean
```

**SpringMVCï¼š**

```xml
<bean id="sqlSessionFactory"
class="com.baomidou.mybatisplus.extension.spring.MybatisSqlSessionFactoryBean">
<property name="typeAliasesPackage"
value="com.baomidou.mybatisplus.samples.quickstart.entity"/>
</bean>
```

#### 2ï¼‰è¿›é˜¶é…ç½®

- **mapUnderScoreToCamelCase**

æ˜¯å¦å¼€å¯è‡ªåŠ¨é©¼å³°å‘½åè§„åˆ™æ˜ å°„ï¼Œè¿™ä¸ªé…ç½®çš„é»˜è®¤å€¼æ˜¯ **true**ï¼Œä½†æ˜¯è¿™ä¸ªå±æ€§åœ¨ **MyBatis** ä¸­çš„é»˜è®¤å€¼æ˜¯ **false**ï¼Œæ‰€ä»¥åœ¨æˆ‘ä»¬å¹³æ—¶çš„å¼€å‘ä¸­éƒ½ä¼šå°†è¿™ä¸ªé…ç½®å¼€å¯ã€‚

```properties
#å…³é—­è‡ªåŠ¨é©¼å³°æ˜ å°„ï¼Œè¯¥å‚æ•°ä¸èƒ½å’Œmybatis-plus.config-locationåŒæ—¶å­˜åœ¨
mybatis-plus.configuration.map-underscore-to-camel-case = false
```

- **cacheEnabled**

å…¨å±€åœ°å¼€å¯æˆ–å…³é—­é…ç½®æ–‡ä»¶ä¸­çš„æ‰€æœ‰æ˜ å°„å™¨å·²ç»é…ç½®çš„ä»»ä½•ç¼“å­˜ï¼Œé»˜è®¤ä¸º **true**ã€‚

```properties
mybatis-plus.configuration.cache-enabled = false
```

#### 3ï¼‰DB ç­–ç•¥é…ç½®

- **idType**

å…¨å±€é»˜è®¤ä¸»é”®ç±»å‹ï¼Œè®¾ç½®åï¼Œå³å¯çœç•¥å®ä½“å¯¹è±¡ä¸­çš„`@TableId(type = IdType.AUTO)`é…ç½®ã€‚è¯¥é…ç½®çš„é»˜è®¤å€¼ä¸º **ID_WORKER**

**SpringBootï¼š**

```properties
mybatis-plus.global-config.db-config.id-type = auto
```

**SpringMVCï¼š**

```xml
<bean id="sqlSessionFactory"
class="com.baomidou.mybatisplus.extension.spring.MybatisSqlSessionFactoryBean">
	<property name="dataSource" ref="dataSource"/>
    <property name="globalConfig">
        <bean class="com.baomidou.mybatisplus.core.config.GlobalConfig">
            <property name="dbConfig">
                <bean         class="com.baomidou.mybatisplus.core.config.GlobalConfig$DbConfig">
                	<property name="idType" value="AUTO"/>
                </bean>
            </property>
        </bean>
    </property>
</bean>
```

- **tablePrefix**

è¡¨åå‰ç¼€ï¼Œå…¨å±€é…ç½®åå¯çœç•¥`@TableName()`é…ç½®ã€‚è¯¥é…ç½®çš„é»˜è®¤å€¼ä¸º **null**

**SpringBootï¼š**

```properties
mybatis-plus.global-config.db-config.table-prefix = yq_
```

**SpringMVCï¼š**

```xml
<bean id="sqlSessionFactory"
class="com.baomidou.mybatisplus.extension.spring.MybatisSqlSessionFactoryBean">
    <property name="dataSource" ref="dataSource"/>
    <property name="globalConfig">
        <bean class="com.baomidou.mybatisplus.core.config.GlobalConfig">
            <property name="dbConfig">
                <bean            class="com.baomidou.mybatisplus.core.config.GlobalConfig$DbConfig">
                	<property name="idType" value="AUTO"/>
                	<property name="tablePrefix" value="yq_"/>
                </bean>
            </property>
        </bean>
    </property>
</bean>
```

### 5. å…¶ä»–æ‰©å±•

#### 1ï¼‰è‡ªåŠ¨å¡«å……

æœ‰æ—¶å€™æˆ‘ä»¬åœ¨æ’å…¥æˆ–æ›´æ–°æ•°æ®çš„æ—¶å€™ï¼Œå¸Œæœ›æœ‰äº›å­—æ®µå¯ä»¥è‡ªåŠ¨å¡«å……ã€‚æ¯”å¦‚æˆ‘ä»¬å¹³æ—¶æ•°æ®è¡¨é‡Œé¢ä¼šæœ‰ä¸ª **æ’å…¥æ—¶é—´** æˆ–è€… **æ›´æ–°æ—¶é—´** è¿™ç§å­—æ®µï¼Œæˆ‘ä»¬ä¼šé»˜è®¤ä»¥å½“å‰æ—¶é—´å¡«å……ï¼Œåœ¨ **MP** ä¸­æˆ‘ä»¬ä¹Ÿå¯ä»¥è¿›è¡Œé…ç½®ã€‚

é¦–å…ˆæˆ‘ä»¬éœ€è¦å€ŸåŠ© `@TableField(fill = FieldFill.INSERT)` è¿™ä¸ªæ³¨è§£ï¼Œåœ¨æ’å…¥æ—¶è¿›è¡Œå¡«å……ã€‚

```java
@TableField(fill = FieldFill.INSERT)
private String remark;
```

å…¶ä¸­è‡ªåŠ¨å¡«å……çš„æ¨¡å¼å¦‚ä¸‹ï¼š

```java
public enum FieldFill {
    /**
    * é»˜è®¤ä¸å¤„ç†
    */
    DEFAULT,
    /**
    * æ’å…¥æ—¶å¡«å……å­—æ®µ
    */
    INSERT,
    /**
    * æ›´æ–°æ—¶å¡«å……å­—æ®µ
    */
    UPDATE,
    /**
    * æ’å…¥å’Œæ›´æ–°æ—¶å¡«å……å­—æ®µ
    */
    INSERT_UPDATE
}
```

ç„¶åæˆ‘ä»¬å†ç¼–å†™è‡ªå®šä¹‰çš„å¡«å……å¤„ç†æ¨¡å¼ï¼š

```java
@Component
public class MyMetaObjectHandler implements MetaObjectHandler {
    @Override
    public void insertFill(MetaObject metaObject) {
        Object remark = getFieldValByName("remark", metaObject);
        if (null == remark) {
            setFieldValByName("remark", "å¥½å¥½å­¦ä¹ ", metaObject);
        }
    }

    @Override
    public void updateFill(MetaObject metaObject) {
		//è‡ªå®šä¹‰æ›´æ–°æ—¶å¡«å……
    }
}
```

æµ‹è¯•ï¼š

```java
@Test
public void testObjectHandler() {
    User user = User.builder().deptId(1).name("å°æ˜").build();
    userMapper.insert(user);
}
/**
	SQLè¯­å¥ï¼š
INSERT INTO student ( name, dept_id, remark )
VALUES ( 'å°æ˜', 1, 'å¥½å¥½å­¦ä¹ ' );
**/
```

å¯ä»¥çœ‹åˆ°æ’å…¥æ—¶ï¼Œå·²ç»è‡ªåŠ¨å°†æˆ‘ä»¬å¡«å……çš„å­—æ®µåˆå¹¶è¿›å»ã€‚

#### 2ï¼‰é€»è¾‘åˆ é™¤

åœ¨å¼€å‘ä¸­ï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬åˆ é™¤æ•°æ®å¹¶ä¸éœ€è¦çœŸæ­£æ„ä¹‰ä¸Šçš„ç‰©ç†åˆ é™¤ï¼Œè€Œæ˜¯ä½¿ç”¨é€»è¾‘åˆ é™¤ï¼Œè¿™æ ·å­æŸ¥è¯¢çš„æ—¶å€™éœ€è¦çŠ¶æ€æ¡ä»¶ï¼Œç¡®ä¿è¢«æ ‡è®°çš„æ•°æ®ä¸è¢«æŸ¥è¯¢åˆ°ã€‚ **MP** å½“ç„¶ä¹Ÿæ”¯æŒè¿™æ ·çš„åŠŸèƒ½ã€‚

æˆ‘ä»¬éœ€è¦å…ˆä¸º **student** è¡¨æ·»åŠ ä¸€ä¸ªå­—æ®µ `status` æ¥å£°æ˜æ•°æ®æ˜¯å¦è¢«åˆ é™¤ï¼Œ**0 è¡¨ç¤ºè¢«åˆ é™¤ï¼Œ1è¡¨ç¤ºæœªåˆ é™¤**ï¼Œç„¶åä¹Ÿéœ€è¦åœ¨å®ä½“ç±»ä¸Šå¢åŠ è¿™ä¸ªå±æ€§ï¼š

```java
@TableLogic
private Integer status;
```

åœ¨ `application.yaml` ä¸­é…ç½®ï¼š

```yaml
mybatis-plus:
  global-config:
    db-config:
      logic-delete-value: 0
      logic-not-delete-value: 1
```

æµ‹è¯•ï¼š

```java
@Test
public void testLogicDelete() {
    userMapper.deleteById(1);
}
/**
	SQLè¯­å¥ï¼š
UPDATE student SET status=0
WHERE id=1 AND status=1;
**/
```

å¯ä»¥çœ‹å‡ºè¿™æ®µ **SQL** å¹¶æ²¡æœ‰çœŸæ­£åˆ é™¤ï¼Œè€Œæ˜¯è¿›è¡Œäº†é€»è¾‘åˆ é™¤ï¼Œåªæ˜¯æ›´æ–°äº†åˆ é™¤æ ‡è¯†

#### 3ï¼‰é€šç”¨æšä¸¾

å¦‚æœæœ‰æ€§åˆ«ä¹‹ç±»çš„å­—æ®µï¼Œæˆ‘ä»¬é€šå¸¸ä¼šç”¨ **0** å’Œ **1** æ¥è¡¨ç¤ºï¼Œä½†æ˜¯æŸ¥å‡ºæ¥æˆ‘ä»¬å¾—è¿›è¡Œå€¼è½¬æ¢ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨æšä¸¾æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š

é¦–å…ˆä¸º **student** è¡¨æ·»åŠ ä¸€ä¸ª **sex** å­—æ®µæ¥è¡¨ç¤ºæ€§åˆ«ï¼Œ**0 è¡¨ç¤ºå¥³æ€§ï¼Œ1 è¡¨ç¤ºç”·æ€§**ï¼Œç„¶åå®šä¹‰ä¸€ä¸ªæšä¸¾ç±»ï¼š

```java
public enum SexEnum implements IEnum<Integer> {
    MAN(1, "ç”·"),
    WOMEN(0, "å¥³");

    private int code;

    private String value;

    SexEnum(int code, String value) {
        this.code = code;
        this.value = value;
    }

    @Override
    public Integer getValue() {
        return this.code;
    }
    
    //æ³¨æ„è¦é‡å†™æ­¤æ–¹æ³•ï¼Œä¸ç„¶ä¼šå°†å€¼è½¬æ¢æˆ â€˜MANâ€™ï¼Œè€Œä¸æ˜¯ â€˜ç”·â€™
    @Override
    public String toString() {
        return this.value;
    }
}
```

ç„¶ååœ¨å®ä½“ç±»ä¸­æ·»åŠ å¯¹åº”å±æ€§ï¼š

```java
private SexEnum sex;
```

åœ¨ `application.yaml` ä¸­é…ç½®ï¼š

```yaml
mybatis-plus:
  type-enums-package: cbuc.life.enums
```

**æµ‹è¯•ï¼š**

```java
@Test
public void selectOne() {
    QueryWrapper<User> queryWrapper = new QueryWrapper<>();
    queryWrapper.eq("name", "å°èœ");
    User user = userMapper.selectOne(queryWrapper);
    System.out.println(user);
}
/**
	è¾“å‡ºç»“æœï¼š
User(id=1, deptId=1, name=å°èœ, remark=å…³æ³¨å°èœä¸è¿·è·¯ï¼, status=1, sex=ç”·)
	SQLè¯­å¥ï¼š
 SELECT id,sex,name,dept_id,remark,status
 FROM student
 WHERE status=1 AND (name = 'å°èœ');
**/
```



**END**

è¿™ç¯‡æ–‡ç« å†™åˆ°è¿™é‡Œå°±å‘Šä¸€æ®µè½äº†å“¦ï¼Œå†…å®¹æœ‰ç‚¹é•¿ï¼Œä¸è¿‡å¦‚æœèƒ½å®Œæ•´çœ‹ä¸‹æ¥ï¼Œæˆ‘ç›¸ä¿¡ä½ è‚¯å®šèƒ½å¤Ÿå¾ˆå¥½çš„ä½¿ç”¨ **MybatisPlus** å•¦ï¼è·¯æ¼«æ¼«ï¼Œå°èœä¸ä½ ä¸€åŒæ±‚ç´¢ï¼



![çœ‹å®Œä¸èµï¼Œéƒ½æ˜¯åè›‹](https://imgconvert.csdnimg.cn/aHR0cHM6Ly93d3cuNTJkb3V0dS5jbi9zdGF0aWMvdGVtcC9waWMvOWJkNjhkMTUwZjA3ODdjNTYwYTQzOWRhMzU5YTU4MGEucG5n?x-oss-process=image/format,png#pic_center)
> ä»Šå¤©çš„ä½ å¤šåŠªåŠ›ä¸€ç‚¹ï¼Œæ˜å¤©çš„ä½ å°±èƒ½å°‘è¯´ä¸€å¥æ±‚äººçš„è¯ï¼
>
> *æˆ‘æ˜¯å°èœï¼Œä¸€ä¸ªå’Œä½ ä¸€èµ·å­¦ä¹ çš„ç”·äººã€‚* `ğŸ’‹`
>
>
> å¾®ä¿¡å…¬ä¼—å·å·²å¼€å¯ï¼Œ**å°èœè‰¯è®°**ï¼Œæ²¡å…³æ³¨çš„åŒå­¦ä»¬è®°å¾—å…³æ³¨å“¦ï¼